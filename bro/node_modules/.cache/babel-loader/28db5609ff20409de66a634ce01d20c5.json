{"ast":null,"code":"import _slicedToArray from\"C:/Users/john.miguel.p.estopa/OneDrive - Accenture/Desktop/bro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect}from\"react\";//a hook that GIVES  \"side-effects\"\nimport{useHistory}from\"react-router-dom\";// allows us to access our path / route history.\nimport Axios from\"axios\";//allows us to make GET and POST requests from the browser.\nimport{useState}from\"react\";//HERE we import useState Hook so we can add state to our functional components.\nimport{useParams}from\"react-router-dom\";// returns: an object of key/value pairs of URL parameters\nimport swal from'sweetalert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var history=useHistory();//USE HISTORY  it will DETERMINED OUR PAST PATH.\nvar LoginNow=function LoginNow(e){e.preventDefault();var data={password:password,email:email};Axios.post(\"http://localhost:5000/login\",data).then(function(res){//IF AUTH IS = TRUE comes from the backend!\nif(res.data.auth){if(res.data.position===\"user\"){console.log(res.data);localStorage.setItem(\"user\",res.data.token);localStorage.setItem(\"email\",res.data.email);localStorage.setItem(\"password\",res.data.password);localStorage.setItem(\"userDetails\",JSON.stringify(res.data.user));localStorage.setItem(\"position\",JSON.stringify(res.data.position));swal({title:\"Login Successfully!\",icon:\"success\",showConfirmButton:false});setTimeout(function(){history.push(\"/user\");window.location.reload();},\"2000\");}else if(res.data.position===\"admin\"){localStorage.setItem(\"admin\",res.data.token);localStorage.setItem(\"email\",res.data.email);localStorage.setItem(\"password\",res.data.password);localStorage.setItem(\"userDetails\",res.data.user);localStorage.setItem(\"position\",JSON.stringify(res.data.position));swal({title:\"Admin Login Successfully!\",icon:\"success\",showConfirmButton:false});setTimeout(function(){history.push(\"/AdminHome\");window.location.reload();},\"2000\");}}}).catch(function(err){swal({text:\"Account doesn't exist\",icon:\"warning\"});});};var isLoaded=[true];useEffect(function(){if(isLoaded){Axios.post(\"http://localhost:5000/login\",{email:localStorage.getItem(\"email\"),password:localStorage.getItem(\"password\")}).then(function(res){if(res.data.position===\"user\"){history.push(\"/user\");window.location.reload();}else if(res.data.position===\"admin\"){history.push(\"/AdminHome\");window.location.reload();}}).catch(function(error){history.push(\"/\");});}else{console.log(\"ERROR\");}},isLoaded);return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapperlogin\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo\",children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:\"https://wallpapercave.com/wp/wp2123032.jpg\",alt:\"\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4 name\",children:\" Josef \"}),/*#__PURE__*/_jsxs(\"form\",{className:\"p-3 mt-3\",onSubmit:LoginNow,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field d-flex align-items-center\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"far fa-user\"}),\" \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"email\",name:\"userName\",id:\"userName\",placeholder:\"Email\",onChange:function onChange(event){setEmail(event.target.value);}}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field d-flex align-items-center\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-key\"}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",required:true,id:\"pwd\",placeholder:\"Password\",onChange:function onChange(event){setPassword(event.target.value);}}),\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn mt-3\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center fs-6\",children:[\" \",/*#__PURE__*/_jsx(\"a\",{children:\"Forget password?\"}),\" or \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Sign up\"}),\" \"]})]});}export default Login;","map":{"version":3,"sources":["C:/Users/john.miguel.p.estopa/OneDrive - Accenture/Desktop/bro/src/login.js"],"names":["React","useEffect","useHistory","Axios","useState","useParams","swal","Login","email","setEmail","password","setPassword","history","LoginNow","e","preventDefault","data","post","then","res","auth","position","console","log","localStorage","setItem","token","JSON","stringify","user","title","icon","showConfirmButton","setTimeout","push","window","location","reload","catch","err","text","isLoaded","getItem","error","event","target","value"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useEffect } from \"react\"; //a hook that GIVES  \"side-effects\"\r\nimport { useHistory } from \"react-router-dom\"; // allows us to access our path / route history.\r\nimport Axios from \"axios\"; //allows us to make GET and POST requests from the browser.\r\nimport { useState } from \"react\"; //HERE we import useState Hook so we can add state to our functional components.\r\nimport { useParams } from \"react-router-dom\"; // returns: an object of key/value pairs of URL parameters\r\nimport swal from 'sweetalert';\r\nfunction Login() {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n\r\n  let history = useHistory(); //USE HISTORY  it will DETERMINED OUR PAST PATH.\r\n\r\n  const LoginNow =(e)=>{\r\n    e.preventDefault();\r\n  \r\n    const data ={\r\n        password: password,\r\n        email: email\r\n    }\r\n    \r\n    Axios.post(\"http://localhost:5000/login\",data)\r\n  \r\n    .then(res =>{\r\n  \r\n       //IF AUTH IS = TRUE comes from the backend!\r\n     if (res.data.auth){\r\n  \r\n       if(res.data.position ===\"user\"){\r\n        console.log(res.data)\r\n        localStorage.setItem(\"user\", res.data.token);\r\n        localStorage.setItem(\"email\", res.data.email);\r\n        localStorage.setItem(\"password\", res.data.password);\r\n        localStorage.setItem(\"userDetails\",JSON.stringify(res.data.user));\r\n        localStorage.setItem(\"position\",JSON.stringify(res.data.position));\r\n\r\n        swal({\r\n          title: \"Login Successfully!\",\r\n          icon: \"success\",\r\n          showConfirmButton: false,\r\n\r\n        \r\n         \r\n        });\r\n        setTimeout(() => {\r\n          history.push(\"/user\")\r\n          window.location.reload();\r\n\r\n        }, \"2000\")\r\n\r\n\r\n  \r\n       } else if(res.data.position ===\"admin\"){       \r\n        localStorage.setItem(\"admin\", res.data.token);\r\n        localStorage.setItem(\"email\", res.data.email);\r\n        localStorage.setItem(\"password\", res.data.password);\r\n        localStorage.setItem(\"userDetails\", res.data.user);\r\n        localStorage.setItem(\"position\",JSON.stringify(res.data.position));\r\n\r\n  \r\n        swal({\r\n          title: \"Admin Login Successfully!\",\r\n          icon: \"success\",\r\n          showConfirmButton: false,\r\n\r\n        \r\n         \r\n        });\r\n        setTimeout(() => {\r\n          history.push(\"/AdminHome\")\r\n          window.location.reload();\r\n\r\n        }, \"2000\")\r\n\r\n  \r\n       }\r\n       \r\n   \r\n     }\r\n      \r\n  \r\n    })\r\n     .catch(err =>{\r\n      swal({\r\n        text:\"Account doesn't exist\",\r\n        icon: \"warning\",\r\n     \r\n\r\n      \r\n       \r\n      });\r\n        \r\n   })\r\n  \r\n  }\r\n\r\n  const isLoaded = [true];\r\n  useEffect(() => {\r\n\r\n     if (isLoaded) {\r\n      Axios.post(\"http://localhost:5000/login\", \r\n\r\n      { \r\n        \r\n        \r\n        email: localStorage.getItem(\"email\"),\r\n        password: localStorage.getItem(\"password\")\r\n      \r\n      }\r\n      \r\n      )\r\n    \r\n      \r\n      .then((res) => {\r\n        if(res.data.position ===\"user\"){ \r\n\r\n          history.push(\"/user\")\r\n          window.location.reload();\r\n        }else if(res.data.position ===\"admin\"){\r\n          history.push(\"/AdminHome\")\r\n          window.location.reload();\r\n        }\r\n      \r\n\r\n\r\n     \r\n      })\r\n      .catch((error) => {\r\n        history.push(\"/\")\r\n\r\n\r\n      })\r\n\r\n    }else{\r\n      console.log(\"ERROR\")\r\n    }\r\n\r\n\r\n  }, isLoaded);\r\n  return (\r\n    <div className=\"wrapperlogin\">\r\n        <div className=\"logo\"> <img src=\"https://wallpapercave.com/wp/wp2123032.jpg\" alt=\"\" /> </div>\r\n        <div className=\"text-center mt-4 name\"> Josef </div>\r\n        <form className=\"p-3 mt-3\" onSubmit={LoginNow}>\r\n          <div className=\"form-field d-flex align-items-center\"> <span className=\"far fa-user\" /> <input required type=\"email\" name=\"userName\" id=\"userName\" placeholder=\"Email\"  onChange={(event) => {\r\n                                  setEmail(event.target.value);\r\n                                }} /> </div>\r\n          <div className=\"form-field d-flex align-items-center\"> <span className=\"fas fa-key\" /> <input type=\"password\" name=\"password\" required id=\"pwd\" placeholder=\"Password\"  onChange={(event) => {\r\n                                  setPassword(event.target.value);\r\n                                }} /> </div> \r\n          <button className=\"btn mt-3\">Login</button>\r\n        </form>\r\n        <div className=\"text-center fs-6\"> <a >Forget password?</a> or <a href=\"/register\">Sign up</a> </div>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}