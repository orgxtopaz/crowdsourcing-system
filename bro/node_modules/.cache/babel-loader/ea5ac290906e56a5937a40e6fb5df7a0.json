{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\john.miguel.p.estopa\\\\OneDrive - Accenture\\\\Desktop\\\\bro\\\\src\\\\login.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect } from \"react\"; //a hook that GIVES  \"side-effects\"\n\nimport { useHistory } from \"react-router-dom\"; // allows us to access our path / route history.\n\nimport Axios from \"axios\"; //allows us to make GET and POST requests from the browser.\n\nimport { useState } from \"react\"; //HERE we import useState Hook so we can add state to our functional components.\n\nimport { useParams } from \"react-router-dom\"; // returns: an object of key/value pairs of URL parameters\n\nimport swal from 'sweetalert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  let history = useHistory(); //USE HISTORY  it will DETERMINED OUR PAST PATH.\n\n  const loginNow = e => {\n    e.preventDefault();\n    const data = {\n      password: password,\n      email: email\n    };\n    Axios.post(\"http://localhost:5000/login\", data).then(res => {\n      //IF AUTH IS = TRUE comes from the backend!\n      if (res.data.auth) {\n        if (res.data.position === \"user\") {\n          console.log(res.data);\n          localStorage.setItem(\"user\", res.data.token);\n          localStorage.setItem(\"email\", res.data.email);\n          localStorage.setItem(\"password\", res.data.password);\n          localStorage.setItem(\"userDetails\", JSON.stringify(res.data.user));\n          swal({\n            title: \"Login Successfully!\",\n            icon: \"success\",\n            showConfirmButton: false\n          });\n          setTimeout(() => {\n            history.push(\"/dashboard\");\n            window.location.reload();\n          }, \"2000\");\n        } else if (res.data.position === \"admin\") {\n          localStorage.setItem(\"admin\", res.data.token);\n          localStorage.setItem(\"email\", res.data.email);\n          localStorage.setItem(\"password\", res.data.password);\n          localStorage.setItem(\"userDetails\", res.data.user);\n        }\n      }\n    }).catch(err => {\n      swal({\n        text: \"Account doesn't exist or still under review\",\n        icon: \"warning\"\n      });\n    });\n  };\n\n  const isLoaded = [true];\n  useEffect(() => {\n    if (isLoaded) {\n      Axios.post(\"http://localhost:5000/login\", {\n        email: localStorage.getItem(\"email\"),\n        password: localStorage.getItem(\"password\")\n      }).then(response => {\n        history.push(\"/dashboard\");\n        window.location.reload();\n      }).catch(error => {\n        history.push(\"/login\");\n      });\n    } else {\n      console.log(\"ERROR\");\n    }\n  }, isLoaded);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrapperlogin\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logo\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://wallpapercave.com/wp/wp2123032.jpg\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 32\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mt-4 name\",\n      children: \" Josef \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"p-3 mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-field d-flex align-items-center\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"far fa-user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 66\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"userName\",\n          id: \"userName\",\n          placeholder: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 99\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-field d-flex align-items-center\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"fas fa-key\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 66\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          id: \"pwd\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 98\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn mt-3\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center fs-6\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"a\", {\n        children: \"Forget password?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 44\n      }, this), \" or \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/register\",\n        children: \"Sign up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 72\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"S6EHoGpnbSeX+eDcS7WS79UoMNY=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/john.miguel.p.estopa/OneDrive - Accenture/Desktop/bro/src/login.js"],"names":["React","useEffect","useHistory","Axios","useState","useParams","swal","Login","email","setEmail","password","setPassword","history","loginNow","e","preventDefault","data","post","then","res","auth","position","console","log","localStorage","setItem","token","JSON","stringify","user","title","icon","showConfirmButton","setTimeout","push","window","location","reload","catch","err","text","isLoaded","getItem","response","error"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useEffect } from \"react\"; //a hook that GIVES  \"side-effects\"\r\nimport { useHistory } from \"react-router-dom\"; // allows us to access our path / route history.\r\nimport Axios from \"axios\"; //allows us to make GET and POST requests from the browser.\r\nimport { useState } from \"react\"; //HERE we import useState Hook so we can add state to our functional components.\r\nimport { useParams } from \"react-router-dom\"; // returns: an object of key/value pairs of URL parameters\r\nimport swal from 'sweetalert';\r\nfunction Login() {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n\r\n  let history = useHistory(); //USE HISTORY  it will DETERMINED OUR PAST PATH.\r\n\r\n  const loginNow =(e)=>{\r\n    e.preventDefault();\r\n  \r\n    const data ={\r\n        password: password,\r\n        email: email\r\n    }\r\n    \r\n    Axios.post(\"http://localhost:5000/login\",data)\r\n  \r\n    .then(res =>{\r\n  \r\n       //IF AUTH IS = TRUE comes from the backend!\r\n     if (res.data.auth){\r\n  \r\n       if(res.data.position ===\"user\"){\r\n        console.log(res.data)\r\n        localStorage.setItem(\"user\", res.data.token);\r\n        localStorage.setItem(\"email\", res.data.email);\r\n        localStorage.setItem(\"password\", res.data.password);\r\n        localStorage.setItem(\"userDetails\",JSON.stringify(res.data.user));\r\n\r\n        swal({\r\n          title: \"Login Successfully!\",\r\n          icon: \"success\",\r\n          showConfirmButton: false,\r\n\r\n        \r\n         \r\n        });\r\n        setTimeout(() => {\r\n          history.push(\"/dashboard\")\r\n          window.location.reload();\r\n\r\n        }, \"2000\")\r\n\r\n\r\n  \r\n       } else if(res.data.position ===\"admin\"){       \r\n        localStorage.setItem(\"admin\", res.data.token);\r\n        localStorage.setItem(\"email\", res.data.email);\r\n        localStorage.setItem(\"password\", res.data.password);\r\n        localStorage.setItem(\"userDetails\", res.data.user);\r\n\r\n  \r\n  \r\n       }\r\n       \r\n   \r\n     }\r\n      \r\n  \r\n    })\r\n     .catch(err =>{\r\n      swal({\r\n        text:\"Account doesn't exist or still under review\",\r\n        icon: \"warning\",\r\n     \r\n\r\n      \r\n       \r\n      });\r\n        \r\n   })\r\n  \r\n  }\r\n\r\n  const isLoaded = [true];\r\n  useEffect(() => {\r\n\r\n     if (isLoaded) {\r\n      Axios.post(\"http://localhost:5000/login\", \r\n\r\n      { \r\n        \r\n        \r\n        email: localStorage.getItem(\"email\"),\r\n        password: localStorage.getItem(\"password\")\r\n      \r\n      }\r\n      \r\n      )\r\n    \r\n      \r\n      .then((response) => {\r\n        history.push(\"/dashboard\")\r\n        window.location.reload();\r\n\r\n\r\n     \r\n      })\r\n      .catch((error) => {\r\n        history.push(\"/login\")\r\n\r\n\r\n      })\r\n\r\n    }else{\r\n      console.log(\"ERROR\")\r\n    }\r\n\r\n\r\n  }, isLoaded);\r\n  return (\r\n    <div className=\"wrapperlogin\">\r\n        <div className=\"logo\"> <img src=\"https://wallpapercave.com/wp/wp2123032.jpg\" alt=\"\" /> </div>\r\n        <div className=\"text-center mt-4 name\"> Josef </div>\r\n        <form className=\"p-3 mt-3\">\r\n          <div className=\"form-field d-flex align-items-center\"> <span className=\"far fa-user\" /> <input type=\"text\" name=\"userName\" id=\"userName\" placeholder=\"Email\" /> </div>\r\n          <div className=\"form-field d-flex align-items-center\"> <span className=\"fas fa-key\" /> <input type=\"password\" name=\"password\" id=\"pwd\" placeholder=\"Password\" /> </div> \r\n          <button className=\"btn mt-3\">Login</button>\r\n        </form>\r\n        <div className=\"text-center fs-6\"> <a >Forget password?</a> or <a href=\"/register\">Sign up</a> </div>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}