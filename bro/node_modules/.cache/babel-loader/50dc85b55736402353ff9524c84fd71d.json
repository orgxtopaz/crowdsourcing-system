{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\john.miguel.p.estopa\\\\OneDrive - Accenture\\\\Desktop\\\\bro\\\\src\\\\register.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect } from \"react\"; //a hook that GIVES  \"side-effects\"\n\nimport { useHistory } from \"react-router-dom\"; // allows us to access our path / route history.\n\nimport Axios from \"axios\"; //allows us to make GET and POST requests from the browser.\n\nimport { useState } from \"react\"; //HERE we import useState Hook so we can add state to our functional components.\n\nimport { useParams } from \"react-router-dom\"; // returns: an object of key/value pairs of URL parameters\n\nimport swal from 'sweetalert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Register() {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [code, setCode] = useState(\"\");\n  const [nextPage, setnexPage] = useState(false);\n  const [verifyEmail, setVerifyEmail] = useState(true);\n\n  function CreateAccount(e) {\n    e.preventDefault();\n    setnexPage(true);\n    setVerifyEmail(false);\n    Axios.post(\"http://localhost:5000/register\", {\n      username: username,\n      email: email,\n      password: password,\n      date: new Date().toLocaleString()\n    }).then(res => {\n      console.log(res.data.user);\n      localStorage.setItem(\"email\", res.data.user.email);\n      localStorage.setItem(\"userId\", res.data.user._id);\n    }).catch(err => {\n      if (err.response.data[27] == '1') {\n        swal({\n          title: \"Email already exist!\",\n          text: \"Please register new email!\",\n          icon: \"warning\",\n          button: \"Got it\"\n        });\n        setTimeout(() => {\n          window.location.reload();\n        }, \"3000\");\n      }\n    });\n  }\n\n  let history = useHistory();\n\n  function verifyNow(e) {\n    e.preventDefault();\n\n    if (code == \"\") {\n      swal({\n        title: \"Code is Invalid!\",\n        text: \"Please see the code which was send to your Email!\",\n        icon: \"warning\",\n        button: \"Got it\"\n      });\n    } else {\n      const data = {\n        code: code,\n        email: localStorage.getItem(\"email\"),\n        userId: localStorage.getItem(\"userId\")\n      };\n      Axios.put(\"http://localhost:5000/verify\", data).then(res => {\n        swal({\n          title: \"Email Verified Successfully!\",\n          icon: \"success\",\n          button: \"Got it\"\n        });\n        setTimeout(() => {\n          history.push(\"/\");\n          window.location.reload();\n        }, \"3000\");\n      }).catch(err => {\n        swal({\n          title: \"Code is Wrong!\",\n          text: \"Please see the code which was send to your Email!\",\n          icon: \"warning\",\n          button: \"Got it\"\n        });\n      });\n    }\n  }\n\n  const isLoaded = [true];\n  useEffect(() => {\n    if (isLoaded) {\n      Axios.post(\"http://localhost:5000/login\", {\n        email: localStorage.getItem(\"email\"),\n        password: localStorage.getItem(\"password\")\n      }).then(res => {\n        if (res.data.position === \"user\") {\n          history.push(\"/user\");\n          window.location.reload();\n        } else if (res.data.position === \"admin\") {\n          history.push(\"/AdminHome\");\n          window.location.reload();\n        }\n      }).catch(error => {});\n    } else {\n      console.log(\"ERROR\");\n    }\n  }, isLoaded);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrapperlogin\",\n    style: {\n      marginTop: \"1%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logo\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://wallpapercave.com/wp/wp2123032.jpg\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 32\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mt-4 name\",\n      children: \" Josef \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      hidden: nextPage,\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"p-3 mt-3\",\n        onSubmit: CreateAccount,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-field d-flex align-items-center\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fas fa-shield-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 64\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"password\",\n            required: true,\n            id: \"pwd\",\n            placeholder: \"Username\",\n            onChange: event => {\n              setUsername(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 103\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-field d-flex align-items-center\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fa fa-envelope\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 66\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            required: true,\n            placeholder: \"Email Address\",\n            id: \"userName\",\n            onChange: event => {\n              setEmail(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 102\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-field d-flex align-items-center\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fas fa-key\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 66\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: event => {\n              setPassword(event.target.value);\n            },\n            type: \"password\",\n            name: \"password\",\n            required: true,\n            id: \"pwd\",\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 98\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn mt-3\",\n          children: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center fs-6\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          children: \"Forget password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 44\n        }, this), \" or \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 80\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      hidden: verifyEmail,\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"p-3 mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-field d-flex align-items-center\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fas fa-shield-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 62\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"password\",\n            id: \"pwd\",\n            placeholder: \"Code\",\n            onChange: event => {\n              setCode(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 7\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn mt-3\",\n          onClick: verifyNow,\n          children: \"Verify\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center fs-6\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          children: \"Forget password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 42\n        }, this), \" or \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 78\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Register, \"rT0BmN4ldHB8/TQJz5x1UU4L/hU=\", false, function () {\n  return [useHistory];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["C:/Users/john.miguel.p.estopa/OneDrive - Accenture/Desktop/bro/src/register.js"],"names":["React","useEffect","useHistory","Axios","useState","useParams","swal","Register","username","setUsername","email","setEmail","password","setPassword","code","setCode","nextPage","setnexPage","verifyEmail","setVerifyEmail","CreateAccount","e","preventDefault","post","date","Date","toLocaleString","then","res","console","log","data","user","localStorage","setItem","_id","catch","err","response","title","text","icon","button","setTimeout","window","location","reload","history","verifyNow","getItem","userId","put","push","isLoaded","position","error","marginTop","event","target","value"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useEffect } from \"react\"; //a hook that GIVES  \"side-effects\"\r\nimport { useHistory } from \"react-router-dom\"; // allows us to access our path / route history.\r\nimport Axios from \"axios\"; //allows us to make GET and POST requests from the browser.\r\nimport { useState } from \"react\"; //HERE we import useState Hook so we can add state to our functional components.\r\nimport { useParams } from \"react-router-dom\"; // returns: an object of key/value pairs of URL parameters\r\nimport swal from 'sweetalert';\r\n\r\n\r\n\r\n\r\n\r\nfunction Register() {\r\n\r\n\r\nconst [username, setUsername] = useState(\"\");\r\nconst [email, setEmail] = useState(\"\");\r\nconst [password, setPassword] = useState(\"\");\r\nconst [code, setCode] = useState(\"\");\r\nconst [nextPage, setnexPage] = useState(false);\r\nconst [verifyEmail, setVerifyEmail] = useState(true);\r\n\r\nfunction CreateAccount(e){\r\n\r\n  e.preventDefault();\r\n\r\n    setnexPage(true)\r\n    setVerifyEmail(false)\r\n\r\n    Axios.post(\"http://localhost:5000/register\",\r\n    \r\n    {\r\n    \r\n      username:username,\r\n      email:email,\r\n    password:password,\r\n   \r\n   \r\n      date:new Date().toLocaleString()\r\n     \r\n    })\r\n      .then((res) => {  \r\n        console.log(res.data.user)\r\n\r\n        localStorage.setItem(\"email\",res.data.user.email)\r\n        localStorage.setItem(\"userId\",res.data.user._id)\r\n     \r\n      }) \r\n      .catch ((err) => {\r\n                 \r\n    \r\n        if(err.response.data[27]=='1'){\r\n       \r\n          swal({\r\n            title: \"Email already exist!\",\r\n            text: \"Please register new email!\",\r\n            icon: \"warning\",\r\n            button: \"Got it\",\r\n           \r\n          });\r\n          setTimeout(() => {\r\n            window.location.reload()\r\n          }, \"3000\")\r\n       \r\n        }\r\n\r\n      })\r\n\r\n}   \r\n\r\n  let history = useHistory()\r\n  function verifyNow(e){\r\n    e.preventDefault()\r\n    if(code==\"\"){\r\n      swal({\r\n        title: \"Code is Invalid!\",\r\n        text: \"Please see the code which was send to your Email!\",\r\n        icon: \"warning\",\r\n        button: \"Got it\",\r\n       \r\n      });\r\n    }else{\r\n\r\n\r\n      \r\n        const data = {\r\n            code: code,\r\n            email: localStorage.getItem(\"email\"),\r\n            userId: localStorage.getItem(\"userId\")\r\n        }\r\n\r\n        Axios.put(\"http://localhost:5000/verify\", data)\r\n\r\n            .then(res => {\r\n\r\n              swal({\r\n                title: \"Email Verified Successfully!\",\r\n                icon: \"success\",\r\n                button: \"Got it\",             \r\n              });\r\n              setTimeout(() => {\r\n                history.push(\"/\")\r\n                window.location.reload();\r\n              }, \"3000\")\r\n\r\n            })\r\n            .catch(err => {\r\n              swal({\r\n                title: \"Code is Wrong!\",\r\n                text: \"Please see the code which was send to your Email!\",\r\n                icon: \"warning\",\r\n                button: \"Got it\",\r\n               \r\n              });\r\n            })\r\n\r\n\r\n\r\n    }\r\n  }\r\n  const isLoaded = [true];\r\n  useEffect(() => {\r\n\r\n     if (isLoaded) {\r\n      Axios.post(\"http://localhost:5000/login\", \r\n\r\n      { \r\n        \r\n        \r\n        email: localStorage.getItem(\"email\"),\r\n        password: localStorage.getItem(\"password\")\r\n      \r\n      }\r\n      \r\n      )\r\n    \r\n      \r\n      .then((res) => {\r\n        if(res.data.position ===\"user\"){ \r\n\r\n          history.push(\"/user\")\r\n          window.location.reload();\r\n        }else if(res.data.position ===\"admin\"){\r\n          history.push(\"/AdminHome\")\r\n          window.location.reload();\r\n        }\r\n      \r\n\r\n\r\n     \r\n      })\r\n      .catch((error) => {\r\n     \r\n\r\n\r\n      })\r\n\r\n    }else{\r\n      console.log(\"ERROR\")\r\n    }\r\n\r\n\r\n  }, isLoaded);\r\n\r\n  return (\r\n    <div className=\"wrapperlogin\" style={{marginTop:\"1%\"}}>\r\n    \r\n        <div className=\"logo\"> <img src=\"https://wallpapercave.com/wp/wp2123032.jpg\" alt=\"\" /> </div>\r\n        <div className=\"text-center mt-4 name\"> Josef </div>\r\n        <div hidden={nextPage}>\r\n\r\n        <form className=\"p-3 mt-3\" onSubmit={CreateAccount}>\r\n\r\n        <div className=\"form-field d-flex align-items-center\"> <span className=\"fas fa-shield-alt\" /> <input type=\"text\" name=\"password\" required id=\"pwd\" placeholder=\"Username\" onChange={(event) => {\r\n                                  setUsername(event.target.value);\r\n                                }} /> </div> \r\n\r\n          <div className=\"form-field d-flex align-items-center\"> <span className=\"fa fa-envelope\" /> <input type=\"email\" required placeholder=\"Email Address\" id=\"userName\" onChange={(event) => {\r\n                                  setEmail(event.target.value);\r\n                                }} /> </div>\r\n          <div className=\"form-field d-flex align-items-center\"> <span className=\"fas fa-key\" /> <input  onChange={(event) => {\r\n                                  setPassword(event.target.value);\r\n                                }}type=\"password\" name=\"password\"  required id=\"pwd\" placeholder=\"Password\" /> </div> \r\n          <button className=\"btn mt-3\" >Sign up</button>\r\n        </form>\r\n        <div className=\"text-center fs-6\"> <a href=\"#\">Forget password?</a> or <a href=\"/\">Login</a> </div>\r\n        </div>\r\n\r\n        {/* VERIFY AREA */}\r\n\r\n              <div hidden={verifyEmail}>\r\n\r\n      <form className=\"p-3 mt-3\">\r\n\r\n      <div className=\"form-field d-flex align-items-center\"> <span className=\"fas fa-shield-alt\" /> \r\n      \r\n      <input type=\"text\" name=\"password\" id=\"pwd\" placeholder=\"Code\" onChange={(event) => {\r\n                                  setCode(event.target.value);\r\n                                }} /> </div> \r\n\r\n       \r\n        <button className=\"btn mt-3\" onClick={verifyNow}>Verify</button>\r\n      </form>\r\n      <div className=\"text-center fs-6\"> <a href=\"#\">Forget password?</a> or <a href=\"/\">Login</a> </div>\r\n      </div>\r\n\r\n        </div>\r\n   \r\n  )\r\n}\r\n\r\nexport default Register"]},"metadata":{},"sourceType":"module"}